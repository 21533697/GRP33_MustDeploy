
@{
    ViewBag.Title = "GCharts";
    Layout = "~/Views/Shared/_UserLayout.cshtml";
}
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script>
    // Load the Visualization API and the piechart package.
    google.load('visualization', '1.0', { 'packages': ['corechart'] });

    // Set a callback to run when the Google Visualization API is loaded.
    $(document).ready(function () {
        $.ajax(
            {
                type: 'POST',
                dataType: 'JSON',
                url: '/OrderDetailed/GetData',
                success:
                    function (response) {
                        // Set chart options
                        var options =
                        {
                            width: 1100,
                            height: 900,
                            sliceVisibilityThreshold: 0,
                            legend: { position: "top", alignment: "end" },
                            chartArea: { left: 370, top: 50, height: "90%" },
                            hAxis:
                            {
                                slantedText: true,
                                slantedTextAngle: 18
                            },
                            bar: { groupWidth: "50%" },
                        };

                        // Draw.
                        drawGraph(response, options, 'graphId');
                    }
            });
    });

    // Callback that creates and populates a data table,
    // instantiates the pie chart, passes in the data and
    // draws it.
    function drawGraph(dataValues, options, elementId) {
        // Initialization.
        var data = new google.visualization.DataTable();

        // Setting.
        data.addColumn('string', 'ProductName');
        data.addColumn('number', 'ProductQuantity');

        // Processing.
        for (var i = 0; i < dataValues.length; i++) {
            // Setting.
            data.addRow([dataValues[i].ProductName, dataValues[i].ProductQuantity]);
        }

        // Setting label.
        var view = new google.visualization.DataView(data);
        //view.setColumns([0, 1,
        //    {
        //        calc: "stringify",
        //        sourceColumn: 1,
        //        type: "string",
        //        role: "annotation"
        //    },
        //    2,
        //    {
        //        calc: "stringify",
        //        sourceColumn: 2,
        //        type: "string",
        //        role: "annotation"
        //    }
        //]);

        // Instantiate and draw our chart, passing in some options.
        var chart = new google.visualization.BarChart(document.getElementById(elementId));

        // Draw chart.
        chart.draw(view, options);
    }
</script>

<div class="well bs-component">
    <div class="row">
        <div class="col-xs-12">
            <!-- CHART -->
            <div class="box box-primary">
                <div class="box-header with-border">
                    <h3 class="box-title custom-heading">GCharts</h3>
                </div>
                <div class="box-body">
                    <div class="chart">
                        <div id="graphId" style="width: 1100px; height: 900px; margin:auto;"></div>
                    </div>
                </div><!-- /.box-body -->
            </div><!-- /.box -->
        </div>
    </div>
</div>  